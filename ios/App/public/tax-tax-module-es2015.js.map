{"version":3,"sources":["./src/app/pages/esse3/tax/tax.page.ts","./src/app/pages/esse3/tax/tax-routing.module.ts","./src/app/pages/esse3/tax/tax.module.ts","./src/app/pages/esse3/tax/tax.page.scss","./src/app/pages/esse3/tax/tax.page.html"],"names":[],"mappings":"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","file":"tax-tax-module-es2015.js","sourcesContent":["import { IonSegment, IonSlides } from '@ionic/angular';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Tax } from 'src/app/interfaces/tax';\r\nimport { TaxService } from 'src/app/services/esse3/tax/tax.service';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\n\r\n@Component({\r\n    selector: 'app-tax',\r\n    templateUrl: './tax.page.html',\r\n    styleUrls: ['./tax.page.scss'],\r\n})\r\nexport class TaxPage implements OnInit {\r\n\r\n    @ViewChild(IonSlides) slides: IonSlides;\r\n    @ViewChild(IonSegment) segment: IonSegment;\r\n\r\n    private persId: number;\r\n    private isReady: boolean;\r\n    private activeIndex: number;\r\n    private labels: String[];\r\n    private slideOpts: any;\r\n    private taxsList: Tax[][];\r\n\r\n    constructor(\r\n        private userService: UserService,\r\n        private taxService: TaxService\r\n    ) {\r\n        this.taxsList = [[], []];\r\n        this.labels = ['Pagate', 'Da pagare'];\r\n        this.activeIndex = 0;\r\n        this.isReady = false;\r\n        this.slideOpts = {\r\n            autoHeight: true,\r\n            spaceBetween: 20\r\n        }\r\n\r\n        this.getTax = this.getTax.bind(this);\r\n    }\r\n\r\n    async ngOnInit() {\r\n        const profile = await this.userService.getUser();\r\n\r\n        this.persId = profile.user.persId;\r\n        this.getTax();\r\n    }\r\n\r\n    /**\r\n     * Recupera le tasse dello studente.\r\n     */\r\n    private getTax() {\r\n        return this.taxService.getTax(this.persId)\r\n            .subscribe((taxs: Tax[]) => {\r\n                taxs.forEach(tax => {\r\n                    const index = tax.payed ? 0 : 1;\r\n                    this.taxsList[index].push(tax);\r\n                });\r\n                this.isReady = true;\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Restituisce la data della tase in base a se la tassa è stata pagata o meno.\r\n     * \r\n     * @param tax la specifica tassa.\r\n     */\r\n    private getDate(tax: Tax): Date {\r\n        if (tax.payed) {\r\n            return tax.paymentDate;\r\n        }\r\n\r\n        return tax.expirationDate;\r\n    }\r\n\r\n    /**\r\n     * Aggiorna la slide alla pressione in base allo specifico Segment Button.\r\n     * \r\n     * @param event L'evento associato al Segment Button.\r\n     */\r\n    private async slideTo(event: CustomEvent) {\r\n        const target = event.target as HTMLIonSegmentButtonElement;\r\n        const value = parseInt(target.value);\r\n\r\n        await this.slides.slideTo(value);\r\n        this.activeIndex = value;\r\n    }\r\n\r\n    /**\r\n     * Aggiorna il Segment Button sulla base dell'indice corrente della slide.\r\n     */\r\n    private async setActiveIndex() {\r\n        const index = await this.slides.getActiveIndex();\r\n\r\n        if (index !== this.activeIndex) {\r\n            const button = this.segment['el'].children[index] as HTMLElement;\r\n            button.click();\r\n        }\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { TaxPage } from './tax.page';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: TaxPage\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class TaxPageRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TaxPageRoutingModule } from './tax-routing.module';\r\n\r\nimport { TaxPage } from './tax.page';\r\nimport { UtilityModule } from '../../utility/utility.module';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        TaxPageRoutingModule,\r\n        UtilityModule\r\n    ],\r\n    declarations: [TaxPage]\r\n})\r\nexport class TaxPageModule { }\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0YXgucGFnZS5zY3NzIn0= */\";","export default \"<ion-content class=\\\"page-content\\\">\\r\\n    <app-refresher [refreshCallback]=\\\"getTax\\\"></app-refresher>\\r\\n    <div class=\\\"flex flex-direction-column\\\">\\r\\n        <app-header>\\r\\n            <ion-toolbar>\\r\\n                <ion-title class=\\\"page-title\\\">Tasse</ion-title>\\r\\n            </ion-toolbar>\\r\\n            <ion-toolbar class=\\\"segment-toolbar\\\">\\r\\n                <ion-segment\\r\\n                    [value]=\\\"activeIndex\\\"\\r\\n                    (ionChange)=\\\"slideTo($event)\\\"\\r\\n                    swipeGesture=\\\"false\\\"\\r\\n                >\\r\\n                    <ion-segment-button\\r\\n                        *ngFor=\\\"let label of labels; index as i\\\"\\r\\n                        [value]=\\\"i\\\"\\r\\n                    >\\r\\n                        <ion-label>{{label}}</ion-label>\\r\\n                    </ion-segment-button>\\r\\n                </ion-segment>\\r\\n            </ion-toolbar>\\r\\n        </app-header>\\r\\n        <div class=\\\"page-main\\\">\\r\\n            <ion-slides\\r\\n                *ngIf=\\\"isReady\\\"\\r\\n                (ionSlideWillChange)=\\\"setActiveIndex()\\\"\\r\\n                [options]=\\\"slideOpts\\\"\\r\\n            >\\r\\n                <ion-slide *ngFor=\\\"let taxs of taxsList\\\">\\r\\n                    <ion-list class=\\\"app-list\\\">\\r\\n                        <ion-item *ngFor=\\\"let tax of taxs\\\">\\r\\n                            <ion-label>\\r\\n                                <h3>{{tax.name}}</h3>\\r\\n                                <div>\\r\\n                                    <i class=\\\"far fa-calendar\\\"></i>\\r\\n                                    <span>{{getDate(tax) | date:'dd/MM/yyyy'}}</span>\\r\\n                                </div>\\r\\n                                <div>\\r\\n                                    <i class=\\\"fas fa-money-bill\\\"></i>\\r\\n                                    <span>{{tax.amount}} €</span>\\r\\n                                </div>\\r\\n                            </ion-label>\\r\\n                        </ion-item>\\r\\n                        <ion-item *ngIf=\\\"taxs.length === 0\\\">Nessun elemento da mostrare.</ion-item>\\r\\n                    </ion-list>\\r\\n                </ion-slide>\\r\\n            </ion-slides>\\r\\n        </div>\\r\\n    </div>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}